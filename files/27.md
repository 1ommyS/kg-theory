
## 27. Кривые Безье. Их свойства. Кривые Безье 3-й степени.

### 27.1. Определение

**Кривые Безье** — это семейство параметрических кривых, широко используемых в компьютерной графике, дизайне и моделировании. Они определяются набором контрольных точек, которые определяют форму кривой, но кривая не обязательно проходит через все контрольные точки (за исключением начальной и конечной).

### 27.2. Свойства кривых Безье

1. **Параметрическая форма**:
    - Кривая определяется как функция от параметра \( t \), где \( t \) изменяется от 0 до 1.

2. **Гладкость**:
    - Обеспечивают гладкие и непрерывные формы без резких изменений направления.

3. **Локальное управление**:
    - Изменение одной контрольной точки влияет только на часть кривой, что упрощает редактирование.

4. **Локальная поддержка**:
    - Каждый сегмент кривой зависит только от нескольких контрольных точек, что облегчает построение сложных форм из простых сегментов.

5. **Полиномная степень**:
    - Кривые Безье могут быть любой степени, но чаще всего используются кубические (3-й степени) кривые.

6. **Линейность на концах**:
    - Кривая начинается в первой контрольной точке и заканчивается в последней, точно пересекая их.

### 27.3. Кривые Безье 3-й степени

#### Определение

**Кривые Безье 3-й степени** — это кубические кривые Безье, определяемые четырьмя контрольными точками. Они являются наиболее распространённым типом кривых Безье, используемым в компьютерной графике и дизайне.

#### Формула кривой Безье 3-й степени

\[
B(t) = (1 - t)^3 P_0 + 3(1 - t)^2 t P_1 + 3(1 - t) t^2 P_2 + t^3 P_3, \quad t \in [0, 1]
\]

- \( P_0, P_1, P_2, P_3 \) — контрольные точки.
- \( t \) — параметр, изменяющийся от 0 до 1.

#### Свойства кубических кривых Безье

1. **Точность прохождения через начальную и конечную точки**:
    - Кривая проходит через \( P_0 \) при \( t = 0 \) и через \( P_3 \) при \( t = 1 \).

2. **Контроль формы через средние точки**:
    - Контрольные точки \( P_1 \) и \( P_2 \) определяют направление и кривизну кривой.

3. **Локальная управляемость**:
    - Изменение \( P_1 \) или \( P_2 \) влияет только на форму кривой между \( P_0 \) и \( P_3 \).

4. **Кубическая гладкость**:
    - Обеспечивают плавные и непрерывные формы без резких углов.

### 27.4. Преимущества кривых Безье

1. **Гладкость**:
    - Позволяют создавать плавные и эстетически приятные формы.

2. **Контроль над формой**:
    - Наличие контрольных точек предоставляет точный контроль над направлением и кривизной кривой.

3. **Широкое применение**:
    - Используются в векторной графике, анимации, CAD-системах и 3D-моделировании.

4. **Локальная управляемость**:
    - Изменение одной контрольной точки не влияет на всю кривую, что облегчает редактирование.

### 27.5. Недостатки кривых Безье

1. **Ограниченная локальная поддержка**:
    - Каждая точка кривой зависит от всех контрольных точек, что может ограничивать гибкость при больших наборах данных.

2. **Проблемы с точностью**:
    - При использовании большого числа сегментов кривой могут возникать проблемы с точностью и численными артефактами.

3. **Необходимость большого количества контрольных точек для сложных форм**:
    - Для описания сложных форм требуется большое количество кривых Безье, что увеличивает сложность моделирования.

### 27.6. Применение кривых Безье

- **Векторная графика**: SVG, Adobe Illustrator, CorelDRAW.
- **3D-моделирование и анимация**: Создание гладких поверхностей и движений объектов.
- **CAD-системы**: Проектирование точных технических деталей и конструкций.
- **Веб-дизайн**: Создание плавных анимаций и интерактивных элементов.

### 27.7. Пример реализации кубической кривой Безье

```cpp
#include <vector>
#include <QVector3D>

// Функция для вычисления точки на кубической кривой Безье
QVector3D bezierCubic(float t, QVector3D P0, QVector3D P1, QVector3D P2, QVector3D P3) {
    float u = 1 - t;
    float tt = t * t;
    float uu = u * u;
    float uuu = uu * u;
    float ttt = tt * t;

    QVector3D point = uuu * P0; // (1-t)^3 * P0
    point += 3 * uu * t * P1;    // 3*(1-t)^2*t*P1
    point += 3 * u * tt * P2;    // 3*(1-t)*t^2*P2
    point += ttt * P3;            // t^3*P3

    return point;
}

int main() {
    std::vector<QVector3D> controlPoints = {
        QVector3D(0, 0, 0),
        QVector3D(1, 2, 0),
        QVector3D(3, 5, 0),
        QVector3D(6, 5, 0)
    };

    std::vector<QVector3D> bezierPoints;

    for (float t = 0.0f; t <= 1.0f; t += 0.01f) {
        bezierPoints.push_back(bezierCubic(t, controlPoints[0], controlPoints[1], controlPoints[2], controlPoints[3]));
    }

    // bezierPoints содержит точки кубической кривой Безье
    return 0;
}
```

### 27.8. Заключение

Кривые Безье, особенно кубические, являются мощным инструментом для создания гладких и контролируемых форм в компьютерной графике. Их широкое применение в различных областях подчёркивает их важность и универсальность.

---
